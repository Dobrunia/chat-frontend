<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- <meta name="viewport" content="width=device-width, initial-scale=1.0" /> -->
    <meta name="viewport" content="width=1550" />
    <title>Websoket chat 2.0</title>
    <link rel="icon" href="./src/img/Mail.ico" type="image/x-icon" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      type="text/css"
      href="./src/themes/default_theme.css"
      id="theme-link"
    />
  </head>
  <body>
    <div class="nav_wrapper">
      <div class="nav_elements" id="nav_elements">
        <header class="p-3 text-bg-dark header">
          <div class="container">
            <div
              class="d-flex flex-wrap align-items-center justify-content-end"
            >
              <form
                class="col-12 col-lg-auto mb-3 mb-lg-0 me-lg-3"
                role="search"
              >
                <input
                  type="search"
                  class="form-control form-control-dark text-bg-dark input_color"
                  id="users_search"
                  placeholder="Поиск пользователей..."
                  aria-label="Search"
                />
                <div class="search_request" id="search_request">
                  <!-- <div class="element">
                    <div class="user_avatar user_avatar_small">
                      <img class="user_avatar_img" src="" alt="" />
                      <div class="status"></div>
                    </div>
                    <span class="element_span">Dobrunia</span>
                  </div> -->
                </div>
              </form>
              <div class="text-end" id="reg_btns">
                <button
                  type="button"
                  class="btn btn-outline-light me-2"
                  id="get_in"
                >
                  Войти
                </button>
                <button type="button" class="btn btn-warning" id="registration">
                  Регистрация
                </button>
              </div>
              <div class="account none" id="account">
                <div class="my_name" id="my_name"></div>
                <div class="avatar_wrapper">
                  <div class="user_avatar user_avatar_small" id="my_avatar">
                    <!-- <img class="user_avatar_img" src="./src/img/ChatbackG.png" alt="" />
                    <div class="status"></div> -->
                  </div>
                  <div class="avatar_hover none" id="avatar_hover">
                    <div class="up-arrow"></div>
                    <div class="theme">
                      <label for="themes">Сменить тему</label>
                      <select
                        class="themes"
                        id="themes"
                        name="theme_name"
                        form="theme_form"
                      ></select>
                    </div>
                    <div class="settings" id="settings">
                      Настройки
                      <svg
                        width="16"
                        height="16"
                        viewBox="0 0 512 512"
                        fill="none"
                        xmlns="http://www.w3.org/2000/svg"
                      >
                        <path
                          d="M294 66H218C211.373 66 206 71.3726 206 78V106.319C206 117.01 193.074 122.364 185.515 114.804L165.49 94.7797C160.804 90.0934 153.206 90.0934 148.52 94.7797L94.7797 148.52C90.0934 153.206 90.0934 160.804 94.7797 165.49L114.804 185.515C122.364 193.074 117.01 206 106.319 206H78C71.3726 206 66 211.373 66 218V294C66 300.627 71.3726 306 78 306H106.319C117.01 306 122.364 318.926 114.804 326.485L94.7797 346.51C90.0934 351.196 90.0934 358.794 94.7797 363.48L148.52 417.22C153.206 421.907 160.804 421.907 165.49 417.22L185.515 397.196C193.074 389.636 206 394.99 206 405.681V434C206 440.627 211.373 446 218 446H294C300.627 446 306 440.627 306 434V405.681C306 394.99 318.926 389.636 326.485 397.196L346.51 417.22C351.196 421.907 358.794 421.907 363.48 417.22L417.22 363.48C421.907 358.794 421.907 351.196 417.22 346.51L397.196 326.485C389.636 318.926 394.99 306 405.681 306H434C440.627 306 446 300.627 446 294V218C446 211.373 440.627 206 434 206H405.681C394.99 206 389.636 193.074 397.196 185.515L417.22 165.49C421.907 160.804 421.907 153.206 417.22 148.52L363.48 94.7797C358.794 90.0934 351.196 90.0934 346.51 94.7797L326.485 114.804C318.926 122.364 306 117.01 306 106.319V78C306 71.3726 300.627 66 294 66Z"
                          stroke="white"
                          stroke-width="24"
                        />
                        <circle
                          cx="256.5"
                          cy="255.5"
                          r="102.5"
                          stroke="white"
                          stroke-width="24"
                        />
                      </svg>
                    </div>
                    <div class="account_exit" id="account_exit">
                      Выйти из аккаунта
                      <svg
                        width="16"
                        height="16"
                        viewBox="0 0 64 64"
                        fill="none"
                        xmlns="http://www.w3.org/2000/svg"
                      >
                        <path
                          d="M22.6066 21.3934C22.2161 21.0029 21.5829 21.0029 21.1924 21.3934C20.8019 21.7839 20.8019 22.4171 21.1924 22.8076L22.6066 21.3934ZM40.9914 42.6066C41.3819 42.9971 42.0151 42.9971 42.4056 42.6066C42.7961 42.2161 42.7961 41.5829 42.4056 41.1924L40.9914 42.6066ZM21.1924 41.1924C20.8019 41.5829 20.8019 42.2161 21.1924 42.6066C21.5829 42.9971 22.2161 42.9971 22.6066 42.6066L21.1924 41.1924ZM42.4056 22.8076C42.7961 22.4171 42.7961 21.7839 42.4056 21.3934C42.0151 21.0029 41.3819 21.0029 40.9914 21.3934L42.4056 22.8076ZM21.1924 22.8076L40.9914 42.6066L42.4056 41.1924L22.6066 21.3934L21.1924 22.8076ZM22.6066 42.6066L42.4056 22.8076L40.9914 21.3934L21.1924 41.1924L22.6066 42.6066Z"
                          fill="red"
                        />
                      </svg>
                    </div>
                  </div>
                </div>
                <div class="notifications_wrapper">
                  <img
                    class="notification_bell"
                    id="notification_bell"
                    src="./src/img/notification-bell.svg"
                    alt=""
                  />
                  <div
                    class="notification_bell_number none"
                    id="notification_bell_number"
                  ></div>
                  <div class="notifications none" id="notifications">
                    <div class="up-arrow"></div>
                    <div
                      class="notifications_list"
                      id="notifications_list"
                    ></div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </header>
        <section class="module_wrapper none" id="get_in_window">
          <div class="module_window">
            <div class="module_container">
              <h1>Вход</h1>
              <form action="./api/get-in" method="post" id="authorizationForm">
                <label>Почта</label>
                <input
                  class="text-imput"
                  name="email"
                  type="email"
                  autocomplete="email"
                  required
                />
                <label>Пароль</label>
                <input
                  class="text-imput"
                  name="password"
                  type="password"
                  autocomplete="current-password"
                  maxlength="21"
                  required
                />
                <input
                  class="checkbox-imput"
                  type="checkbox"
                  name="not_my_pc"
                /><span>чужой компьютер</span>
                <input
                  class="button"
                  type="submit"
                  name="submit"
                  value="Войти"
                />
              </form>
              <button id="registration_2" class="reg_form_btns">
                Зарегистрироваться
              </button>
            </div>
            <button class="exit" id="get_in_exit">x</button>
          </div>
        </section>
        <section class="module_wrapper none" id="registration_window">
          <div class="module_window">
            <div class="module_container">
              <h1>Регистрация</h1>
              <form role="form" id="registrationForm">
                <label>Имя пользователя</label>
                <input
                  class="text-imput"
                  name="username"
                  type="text"
                  autocomplete="username"
                  maxlength="25"
                  required
                />
                <label>Почта</label>
                <input
                  class="text-imput"
                  name="email"
                  type="email"
                  autocomplete="email"
                  required
                />
                <label>Пароль</label>
                <input
                  class="text-imput"
                  name="password"
                  type="password"
                  autocomplete="new-password"
                  maxlength="21"
                  required
                />
                <label>Повторите пароль</label>
                <input
                  class="text-imput"
                  name="password2"
                  type="password"
                  autocomplete="new-password"
                  maxlength="21"
                  required
                />
                <input
                  class="checkbox-imput"
                  type="checkbox"
                  name="accept"
                  required
                /><span>я согласен на обработку персональных данных</span>
                <input
                  class="button"
                  type="submit"
                  name="submit"
                  value="Зарегистрироваться"
                />
              </form>
              <button id="get_in_2" class="reg_form_btns">
                Уже есть аккаунт? Войти
              </button>
            </div>
            <button class="exit" id="registration_exit">x</button>
          </div>
        </section>
        <section class="settings_wrapper none" id="settings_window">
          <div class="settings_window">
            <div class="change_photo" id="change_photo">
              <p>Сменить аватар</p>
              <p>
                <input type="text" id="photoUrl" />
                <button class="btn btn-outline-light me-2" id="change_photoUrl">
                  Сменить аватар
                </button>
              </p>
            </div>
            <form enctype="multipart/form-data" role="form" id="changeName">
              <p>Сменить имя</p>
              <p>
                <input
                  type="text"
                  name="username"
                  id="changeName_input"
                  maxlength="25"
                />
                <input
                  class="btn btn-outline-light me-2"
                  type="submit"
                  value="Сменить никнейм"
                />
              </p>
            </form>
          </div>
          <button class="return btn btn-outline-light me-2" id="settings_exit">
            назад
          </button>
        </section>
        <div class="nav_content fallback" id="nav_content">
          <div class="nav_list none" id="nav_list">
            <div class="nav_ul">
              <div
                class="nav_li nav_select_section"
                data-section="profile_page"
              >
                Моя страница
              </div>
              <div class="nav_li nav_select_section" data-section="messenger">
                Мессенджер
                <!-- <span>4</span> -->
              </div>
              <div class="nav_li nav_select_section" data-section="cats">
                Коты
              </div>
              <div class="nav_li nav_select_section" data-section="aboutUs">
                О проекте
              </div>

              <!-- <div class="nav_li nav_select_section" data-section=имя>
                текст
              </div> -->
            </div>
          </div>
          <div class="nav_sections">
            <div
              class="nav_profile nav_selected_section none"
              id="profile_page"
              data-section="profile_page"
            ></div>
            <div
              class="nav_messaging nav_selected_section none"
              id="messenger"
              data-section="messenger"
            >
              <section class="users_wrapper" id="menu">
                <!-- <button class="menuButton" id="menuButton">-></button> -->
                <input
                  type="search"
                  class="form-control form-control-dark text-bg-dark mar input_color"
                  id="chat_search"
                  placeholder="Поиск моих чатов..."
                  style="width: 250px"
                />
                <div class="users" id="users"></div>
              </section>
              <section class="wrapper blur" id="wrapper">
                <div class="dialogue_with">
                  <div
                    class="dialogue_with_wrapper"
                    id="dialogue_with_wrapper"
                  ></div>
                </div>
                <section
                  class="messages_wrapper"
                  id="messages_wrapper"
                ></section>
              </section>
            </div>
            <div
              class="nav_cats nav_selected_section none"
              id="cats"
              data-section="cats"
            >
              <div class="cats_info">
                Нажмимте мышкой в области экрана внизу
                <img src="./src/img/Cursor.svg" alt="" />, сформируйте
                прямоугольник и отпустите.&nbsp;<span
                  style="color: var(--attention)"
                  >Для еще одной попытки нажмите сюда ->&nbsp;</span
                >
                <img
                  class="cats_refresh"
                  id="cats_refresh"
                  name="cats_refresh"
                  src="./src/img/Refresh.svg"
                  alt=""
                />
              </div>
              <div class="cats_place" id="cats_place"></div>
            </div>
            <div
              class="nav_aboutUs nav_selected_section none"
              id="aboutUs"
              data-section="aboutUs"
            >
              <div class="nav_aboutUs_header">Информация о проекте</div>
              <div class="nav_aboutUs_text">
                В основе своей социальная сеть, которую я пишу для души и
                портфолио. Изначально начиналось все с дипломной работы по
                защите информации в интернете. Все сообщения храняться и
                передабтся в зашифрованном виде. А пароли в захешированном.
                <br />Так-же тут есть несколько кладок со ссылками на другие
                проекты. <br />
                На всякий случай связь со мной - dobruniak@rambler.ru <br />
                Или телеграмм - @SentryEz
              </div>
            </div>

            <!-- <div
              class="nav_имя nav_selected_section none"
              id="имя"
              data-section="имя"
            ></div> -->
          </div>
        </div>
      </div>
      <div class="announcement none" id="announcement">
        <div class="announcement_text" id="announcement_text"></div>
        <button class="announcement_exit" id="announcement_exit">x</button>
      </div>
      <div class="confirmation none" id="confirmation">
        <div class="confirmation_text" id="confirmation_text"></div>
        <div class="confirmation_btns">
          <button
            class="confirmation_btn btn btn-outline-light me-2"
            id="confirmation_yes"
          >
            да
          </button>
          <button
            class="confirmation_btn btn btn-outline-light me-2"
            id="confirmation_no"
          >
            нет
          </button>
        </div>
      </div>
      <div
        class="nav_user_info_edit_window none"
        id="nav_user_info_edit_window"
      >
        <div class="nav_user_info_edit_window_elements">
          <div class="edit_window_element">
            <h3>Изменить бегущую строку</h3>
            <div>
              <input id="scrollingText_input" type="text" maxlength="100" />
              <button id="scrollingText_button">Применить</button>
            </div>
          </div>
          <h2>Добавление ссылок на соц сети:</h2>
          <div class="edit_window_element">
            <h3>Изменить ссылку на Telegram</h3>
            <div>
              <input
                id="telegramLink_input"
                type="text"
                maxlength="25"
                placeholder="Напишите Ваш логин от ТГ без '@'"
              />
              <button id="telegramLink_button">Применить</button>
            </div>
          </div>
          <div class="edit_window_element">
            <h3>Изменить ссылку на Steam</h3>
            <div>
              <input
                id="steamLink_input"
                type="text"
                maxlength="25"
                placeholder="Напишите Ваш id от steam"
              />
              <button id="steamLink_button">Применить</button>
            </div>
          </div>
          <div class="edit_window_element">
            <h3>Изменить ссылку на Shikimori</h3>
            <div>
              <input
                id="shikimoriLink_input"
                type="text"
                maxlength="25"
                placeholder="Напишите Ваш логин от shikimori"
              />
              <button id="shikimoriLink_button">Применить</button>
            </div>
          </div>
          <h2>Смена настроек фона:</h2>
          <div class="edit_window_element">
            <h3>Поставить на фон динамический градиент</h3>
            <div>
              <input
                id="linear_gradient_v1_input"
                type="text"
                maxlength="3"
                placeholder="Напишите в градусах, желаемый угол наклона градиента"
              />
              <button id="linear_gradient_v1_button">Применить</button>
            </div>
          </div>
          <div class="edit_window_element">
            <h3>Поставить на фон фотографию, которая уплывает вниз</h3>
            <div>
              <input
                id="fallback_input"
                type="text"
                placeholder="Ссылка на картинку... (некоторые картинки не работают)"
              />
              <button id="fallback_button">Применить</button>
            </div>
          </div>
          <div class="edit_window_element">
            <div>
              <button id="button_remove">Сбросить все настройки фона</button>
            </div>
          </div>
        </div>
        <button
          class="nav_user_info_edit_window_exit"
          id="nav_user_info_edit_window_exit"
        >
          x
        </button>
      </div>
    </div>
  </body>
  <script>
    function autoResize(textarea) {
      textarea.style.height = 'auto';
      textarea.style.height = textarea.scrollHeight + 5 + 'px';
      const maxLength = parseInt(textarea.getAttribute('maxlength'));
      const currentLength = textarea.value.length;
      const remaining = maxLength - currentLength;

      charCount.textContent = remaining;
    }
  </script>
  <script src="https://cdn.jsdelivr.net/npm/emoji-mart@latest/dist/browser.js"></script>
  <script type="module" src="./src/socket/socket.ts"></script>
  <script type="module" src="./src/socket/socket-service.ts"></script>
  <script type="module" src="./src/handlers/header-handler.js"></script>
  <script type="module" src="./src/handlers/main-page-handler.js"></script>
  <script type="module" src="./src/main.js"></script>
  <script type="module" src="./src/pages/cats.js"></script>
</html>
